<?xml version="1.0" encoding="utf-8"?>
<project name="SymfonyCommandTaskIntegrationTest" default="test">

	<property file="${project.basedir}/symfony-command-task-integration-test.local.properties"/>

	<taskdef name="symfony-cmd" classname="VasekPurchart\Phing\SymfonyCommand\SymfonyCommandTask"/>

	<target name="call-command">
		<property name="call-command.default.app" value="${project.basedir}/console"/>
		<property name="symfony-command.default.app" value="${call-command.default.app}"/>

		<property name="call-command.default.executable" value="php"/>
		<property name="symfony-command.default.executable" value="${call-command.default.executable}"/>

		<symfony-cmd cmd="hello:world"/>
	</target>

	<target name="call-command-with-custom-executable">
		<property name="call-command-with-custom-executable.default.app" value="${project.basedir}/console"/>
		<property name="symfony-command.default.app" value="${call-command-with-custom-executable.default.app}"/>

		<property name="call-command-with-custom-executable.test.executable" value="php"/>

		<symfony-cmd executable="${call-command-with-custom-executable.test.executable}" cmd="hello:world"/>
	</target>

	<target name="call-command-with-custom-app">
		<property name="call-command-with-custom-app.default.executable" value="php"/>
		<property name="symfony-command.default.executable" value="${call-command-with-custom-app.default.executable}"/>

		<property name="call-command-with-custom-app.test.app" value="${project.basedir}/console"/>

		<symfony-cmd app="${call-command-with-custom-app.test.app}" cmd="hello:world"/>
	</target>

	<target name="call-command-with-custom-executable-and-app">
		<property name="call-command-with-custom-executable-and-app.test.app" value="${project.basedir}/console"/>
		<property name="call-command-with-custom-executable-and-app.test.executable" value="php"/>

		<symfony-cmd
			executable="${call-command-with-custom-executable-and-app.test.executable}"
			app="${call-command-with-custom-executable-and-app.test.app}"
			cmd="hello:world"
		/>
	</target>

	<target name="call-command-with-app-as-executable">
		<property name="call-command-with-app-as-executable.test.app" value="${project.basedir}/console"/>

		<symfony-cmd app="${call-command-with-app-as-executable.test.app}" cmd="hello:world"/>
	</target>

	<target name="call-command-and-override-defaults">
		<property name="symfony-command.default.app" value="XXX"/>

		<property name="symfony-command.default.executable" value="YYY"/>

		<property name="call-command-and-override-defaults.test.app" value="${project.basedir}/console"/>
		<property name="call-command-and-override-defaults.test.executable" value="php"/>

		<symfony-cmd
			executable="${call-command-and-override-defaults.test.executable}"
			app="${call-command-and-override-defaults.test.app}"
			cmd="hello:world"
		/>
	</target>

	<target name="missing-app">
		<symfony-cmd cmd="hello:world"/>
	</target>

</project>
